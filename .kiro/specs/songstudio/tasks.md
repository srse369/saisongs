# Implementation Plan

- [x] 1. Initialize project structure and dependencies
  - Create Vite + React + TypeScript project
  - Install dependencies: @neondatabase/serverless, react-router-dom, tailwindcss
  - Configure Tailwind CSS
  - Set up project folder structure (components, services, types, utils, contexts, hooks)
  - Create .env.local template for Neon connection string
  - Configure vite.config.ts for GitHub Pages deployment
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [x] 2. Define TypeScript types and interfaces
  - Create types/index.ts with Song, Singer, SongSingerPitch, Slide, and SongWithPitches interfaces
  - Define service method return types and error types
  - _Requirements: 1.2, 3.1, 4.2_

- [x] 3. Implement database service layer
  - [x] 3.1 Create DatabaseService for Neon connection
    - Write DatabaseService class with connect(), query(), and disconnect() methods
    - Implement connection pooling and error handling
    - Add environment variable configuration for connection string
    - _Requirements: 7.1, 7.4, 7.5_
  - [x] 3.2 Create SongService with CRUD operations
    - Implement getAllSongs(), getSongById(), createSong(), updateSong(), deleteSong(), searchSongs()
    - Use parameterized queries for SQL injection prevention
    - Add input validation
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 6.2, 7.1_
  - [x] 3.3 Create SingerService with CRUD operations
    - Implement getAllSingers(), getSingerById(), createSinger(), updateSinger(), deleteSinger()
    - Use parameterized queries
    - _Requirements: 3.1, 3.4, 7.2_
  - [x] 3.4 Create PitchService for pitch associations
    - Implement getPitchesForSong(), getPitchesForSinger(), createPitch(), updatePitch(), deletePitch()
    - Handle many-to-many relationships
    - _Requirements: 3.2, 3.3, 4.1, 4.2, 4.3, 4.4, 4.5, 7.3_

- [x
] 4. Create utility functions
  - Implement generateSlides() function to split lyrics into slides
  - Create text validation utilities
  - Add date formatting helpers
  - _Requirements: 2.1, 2.2_

- [x] 5. Implement React contexts for state management
  - Create SongContext for managing song state
  - Create SingerContext for managing singer state
  - Create PitchContext for managing pitch associations
  - Add loading and error states to contexts
  - _Requirements: 1.1, 3.1, 4.1, 7.4_

- [x] 6. Build common UI components
  - [x] 6.1 Create SearchBar component
    - Implement controlled input with debouncing
    - Add clear button and placeholder support
    - _Requirements: 6.1, 6.2_
  - [x] 6.2 Create Modal component
    - Implement reusable modal with backdrop
    - Add close on escape key and backdrop click
    - _Requirements: 1.1, 1.4, 1.5_
  - [x] 6.3 Create ErrorBoundary component
    - Catch React errors and display fallback UI
    - Add reload functionality
    - _Requirements: 7.5_
  - [x] 6.4 Create LoadingSpinner component
    - Simple loading indicator for async operations
    - _Requirements: 6.3_

- [x] 7. Implement admin components for song management
  - [x] 7.1 Create SongForm component
    - Build form with name, lyrics, and translation fields
    - Add client-side validation
    - Handle create and edit modes
    - _Requirements: 1.1, 1.3, 1.4_
  - [x] 7.2 Create SongList component for admin view
    - Display all songs in a list/grid
    - Add edit and delete buttons for each song
    - Implement delete confirmation modal
    - _Requirements: 1.4, 1.5_
  - [x] 7.3 Create SongManager component
    - Combine SongForm and SongList
    - Handle CRUD operations via SongService
    - Display success/error messages
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 8. Implement admin components for singer management
  - [x] 8.1 Create SingerForm component
    - Build form with name field
    - Add validation
    - _Requirements: 3.1, 3.4_
  - [x] 8.2 Create SingerList component
    - Display all singers
    - Add edit and delete buttons
    - _Requirements: 3.4_
  - [x] 8.3 Create SingerManager component
    - Combine SingerForm and SingerList
    - Handle CRUD operations via SingerService
    - _Requirements: 3.1, 3.4_

- [x] 9. Implement pitch management components
  - [x] 9.1 Create PitchForm component
    - Build form to associate singer with song and pitch value
    - Add dropdowns for song and singer selection
    - Add pitch text input
    - _Requirements: 3.2, 3.3, 4.1, 4.2_
  - [x] 9.2 Create PitchList component
    - Display pitch associations for a song or singer
    - Show singer name, song name, and pitch value
    - Add edit and delete buttons
    - _Requirements: 3.5, 4.3, 4.4, 4.5_
  - [x] 9.3 Create PitchManager component
    - Combine PitchForm and PitchList
    - Handle CRUD operations via PitchService
    - _Requirements: 3.2, 3.3, 3.5, 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 10. Build presentation components
  - [x] 10.1 Create SlideView component
    - Display slide content with large, readable fonts
    - Show translation below original lyrics when available
    - Display song name at top
    - Apply responsive styling with Tailwind
    - _Requirements: 2.1, 2.2, 2.4, 2.5_
  - [x] 10.2 Create SlideNavigation component
    - Add previous and next buttons
    - Display current slide number and total slides
    - Disable buttons at boundaries
    - _Requirements: 2.3_
  - [x] 10.3 Create SongList component for presentation view
    - Display searchable list of songs
    - Integrate SearchBar component
    - Add filter by singer dropdown
    - Handle song selection
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_
  - [x] 10.4 Create PresentationMode component
    - Load song and generate slides using generateSlides()
    - Implement full-screen mode
    - Add keyboard navigation (arrow keys for next/prev, Escape to exit)
    - Maintain slide position when toggling modes
    - Hide admin controls in presentation mode
    - Integrate SlideView and SlideNavigation
    - _Requirements: 2.1, 2.3, 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 11. Implement routing and main app structure
  - [x] 11.1 Create App.tsx with React Router
    - Set up routes for home, admin (songs, singers, pitches), and presentation
    - Add navigation menu
    - _Requirements: 1.1, 3.1, 6.5_
  - [x] 11.2 Create main layout component
    - Add header with navigation
    - Create responsive layout
    - _Requirements: 2.5_
  - [x] 11.3 Wrap app in contexts and ErrorBoundary
    - Provide SongContext, SingerContext, PitchContext
    - Add ErrorBoundary at root level
    - _Requirements: 7.4, 7.5_

- [x] 12. Create database schema and setup script
  - Write SQL script to create songs, singers, and song_singer_pitches tables
  - Add indexes for performance
  - Execute schema on existing Neon database (project: dry-smoke-47581568, branch: br-delicate-mountain-afvp7hqz)
  - Create README with connection instructions
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 13. Configure GitHub Pages deployment
  - Update vite.config.ts with base path
  - Create GitHub Actions workflow for automated deployment
  - Add build script to package.json
  - Create deployment documentation
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [x] 14. Add error handling and loading states
  - Implement error handling in all service methods
  - Add loading spinners during async operations
  - Display toast notifications for success/error messages
  - Handle database connection failures gracefully
  - _Requirements: 6.3, 7.5_

- [x] 15. Implement search functionality
  - Add search logic to SongService
  - Integrate search with SongList component
  - Add debouncing to search input
  - Implement filter by singer
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 16. Add basic styling and responsive design
  - Style all components with Tailwind CSS
  - Ensure responsive design for mobile, tablet, and desktop
  - Add dark mode support (optional)
  - Optimize font sizes for presentation mode
  - _Requirements: 2.5_

- [x] 17. Create sample data and seed script
  - Write script to populate database with sample songs
  - Add sample singers and pitch associations
  - Document how to run seed script
  - _Requirements: 7.1, 7.2, 7.3_
